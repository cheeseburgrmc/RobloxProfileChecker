<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roblox Group Checker</title>
<style>
  body, html {
    margin: 0; padding: 0; height: 100%;
    background-color: black;
    color: white;
    font-family: Arial, sans-serif;
  }
  .container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center; /* vertical center */
    align-items: center;     /* horizontal center */
    gap: 20px;
    padding: 20px;
  }
  #results {
    opacity: 0;
    transition: opacity 1.2s ease-in-out;
    width: 90%;
    max-width: 960px;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
  }
  #results.visible {
    opacity: 1;
  }
  .groupBox {
    background: #222;
    border: 1px solid #555;
    padding: 15px;
    width: 280px;
    border-radius: 8px;
    box-sizing: border-box;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 120px;
    color: white;
  }
  .groupBox h3 {
    margin: 0 0 5px 0;
  }
  .owner {
    font-size: 0.9em;
    opacity: 0.7;
  }
  a {
    color: #00aaff;
    text-decoration: underline;
  }
  input, button {
    padding: 10px;
    font-size: 1em;
    border-radius: 5px;
    border: none;
  }
  button {
    cursor: pointer;
    background-color: #00aaff;
    color: black;
    font-weight: bold;
  }
  button:hover {
    background-color: #0088cc;
  }
</style>
</head>
<body>
  <div class="container">
    <input type="text" id="username" placeholder="Enter Roblox username or user ID" />
    <button id="checkBtn">Check Groups</button>
    <div id="results"></div>
  </div>

<script>
  async function getUserId(user) {
    if (/^\d+$/.test(user)) {
      return parseInt(user);
    }
    const res = await fetch('https://users.roblox.com/v1/usernames/users', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ usernames: [user] }),
    });
    if (!res.ok) return null;
    const data = await res.json();
    if (data.data && data.data.length > 0) {
      return data.data[0].id;
    }
    return null;
  }

  async function getUserGroups(userId) {
    const res = await fetch(`https://groups.roblox.com/v1/users/${userId}/groups/roles`);
    if (!res.ok) return null;
    return await res.json();
  }

  const resultsDiv = document.getElementById('results');
  const button = document.getElementById('checkBtn');

  button.addEventListener('click', async () => {
    resultsDiv.classList.remove('visible');
    resultsDiv.innerHTML = 'Loading...';

    const username = document.getElementById('username').value.trim();
    if (!username) {
      resultsDiv.innerHTML = 'Please enter a username or user ID.';
      resultsDiv.classList.add('visible');
      return;
    }

    const userId = await getUserId(username);
    if (!userId) {
      resultsDiv.innerHTML = 'User does not exist.';
      resultsDiv.classList.add('visible');
      return;
    }

    const groupsData = await getUserGroups(userId);
    if (!groupsData || !groupsData.data || groupsData.data.length === 0) {
      resultsDiv.innerHTML = 'No groups found or userâ€™s groups are private.';
      resultsDiv.classList.add('visible');
      return;
    }

    // Clear and create group boxes
    resultsDiv.innerHTML = '';
    groupsData.data.forEach(group => {
      const box = document.createElement('div');
      box.className = 'groupBox';

      const groupName = group.group.name || 'Unnamed Group';
      const ownerName = (group.owner && group.owner.username) ? group.owner.username : 'Unknown';

      box.innerHTML = `
        <div style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
          <h3>${groupName}</h3>
          <div class="owner">Owner: ${ownerName}</div>
        </div>
        <div style="margin-left: 15px; display: flex; align-items: center;">
          <a href="https://www.roblox.com/groups/${group.group.id}" target="_blank" rel="noopener noreferrer">Visit Group</a>
        </div>
      `;
      resultsDiv.appendChild(box);
    });

    // Delay 2 seconds then fade in results
    resultsDiv.style.opacity = '0';
    setTimeout(() => {
      resultsDiv.classList.add('visible');
    }, 2000);
  });
</script>
</body>
</html>
